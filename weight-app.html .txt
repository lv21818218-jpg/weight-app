
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>ä¸‰äººä½“é‡è®°å½•</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont;
  padding: 15px;
  background: #f6f6f6;
}
h2 { text-align: center; }
input, button {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  font-size: 16px;
}
button {
  background: #007aff;
  color: white;
  border: none;
  border-radius: 6px;
}
canvas {
  background: white;
  border-radius: 10px;
  margin-top: 15px;
}
</style>
</head>

<body>
<h2>ğŸ“Š ä¸‰äººä½“é‡è®°å½•</h2>

<input type="date" id="date">
<input type="number" step="0.1" placeholder="ä½ çš„ä½“é‡ (kg)" id="w1">
<input type="number" step="0.1" placeholder="åŒäº‹Aä½“é‡ (kg)" id="w2">
<input type="number" step="0.1" placeholder="åŒäº‹Bä½“é‡ (kg)" id="w3">

<button onclick="save()">ä¿å­˜è®°å½•</button>

<canvas id="chart"></canvas>

<script>
let data = JSON.parse(localStorage.getItem("weights") || "[]");

function save() {
  const d = date.value;
  if (!d) return alert("è¯·é€‰æ‹©æ—¥æœŸ");
  data.push({
    date: d,
    a: w1.value,
    b: w2.value,
    c: w3.value
  });
  localStorage.setItem("weights", JSON.stringify(data));
  draw();
}

function draw() {
  const ctx = document.getElementById('chart');
  const labels = data.map(i => i.date);
  const get = k => data.map(i => i[k]);

  if (window.chart) window.chart.destroy();
  window.chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [
        { label: 'ä½ ', data: get("a") },
        { label: 'åŒäº‹A', data: get("b") },
        { label: 'åŒäº‹B', data: get("c") }
      ]
    }
  });
}

draw();
</script>
</body>
</html>
